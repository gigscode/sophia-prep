/* Modern UI Redesign - Design System */
@import './styles/design-tokens.css';
@import './styles/animations.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer utilities {
  /* ===== Modern UI Redesign - Animation Utilities ===== */
  
  /* Card Hover Effects */
  .card-hover {
    transition: transform var(--transition-base), box-shadow var(--transition-base);
  }
  
  .card-hover:hover {
    transform: scale(1.02);
    box-shadow: var(--shadow-lg);
  }
  
  /* Button Press Effect */
  .button-press {
    transition: transform var(--transition-fast);
  }
  
  .button-press:active {
    transform: scale(0.98);
  }
  
  /* Fade In Animation */
  .animate-fade-in {
    animation: fadeIn var(--transition-slow) ease-out;
  }
  
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  
  /* Fade In Up Animation (for cards) */
  .animate-fade-in-up {
    animation: fadeInUp var(--transition-slow) ease-out;
  }
  
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* Stagger Delays for Card Loading */
  .animate-delay-0 {
    animation-delay: 0ms;
  }
  
  .animate-delay-50 {
    animation-delay: 50ms;
  }
  
  .animate-delay-100 {
    animation-delay: 100ms;
  }
  
  .animate-delay-150 {
    animation-delay: 150ms;
  }
  
  .animate-delay-200 {
    animation-delay: 200ms;
  }
  
  .animate-delay-250 {
    animation-delay: 250ms;
  }
  
  .animate-delay-300 {
    animation-delay: 300ms;
  }
  
  /* Smooth Transitions */
  .transition-smooth {
    transition: all var(--transition-base);
  }
  
  .transition-fast {
    transition: all var(--transition-fast);
  }
  
  .transition-slow {
    transition: all var(--transition-slow);
  }
  
  /* Legacy utilities */
  .line-clamp-1 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 1;
  }

  .line-clamp-2 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
  }

  .line-clamp-3 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 3;
  }

  .animate-slide-up {
    animation: slideUp 0.3s ease-out;
  }

  @keyframes slideUp {
    from {
      transform: translateY(100%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
}

@layer base {
  :root {
    /* ===== Modern UI Redesign - Design System Tokens ===== */
    
    /* Primary Colors - Main brand colors */
    --color-primary-blue: 217 91% 60%; /* #3B82F6 - rgb(59, 130, 246) */
    --color-primary-orange: 20 95% 53%; /* #F97316 - rgb(249, 115, 22) */
    --color-primary-green: 158 64% 52%; /* #10B981 - rgb(16, 185, 129) */
    --color-primary-purple: 258 90% 66%; /* #8B5CF6 - rgb(139, 92, 246) */
    
    /* Background Colors */
    --color-bg-page: 210 40% 98%; /* #F8FAFC - rgb(248, 250, 252) */
    --color-bg-card: 0 0% 100%; /* #FFFFFF - rgb(255, 255, 255) */
    --color-bg-section: 214 32% 97%; /* #F1F5F9 - rgb(241, 245, 249) */
    
    /* Pastel Accent Colors - For cards */
    --color-pastel-mint: 152 81% 90%; /* #D1FAE5 - rgb(209, 250, 229) */
    --color-pastel-peach: 32 98% 88%; /* #FED7AA - rgb(254, 215, 170) */
    --color-pastel-lavender: 270 91% 91%; /* #E9D5FF - rgb(233, 213, 255) */
    --color-pastel-sky: 213 97% 87%; /* #DBEAFE - rgb(219, 234, 254) */
    --color-pastel-yellow: 48 96% 89%; /* #FEF3C7 - rgb(254, 243, 199) */
    
    /* Text Colors */
    --color-text-primary: 215 25% 27%; /* #1E293B - rgb(30, 41, 59) */
    --color-text-secondary: 215 16% 47%; /* #64748B - rgb(100, 116, 139) */
    --color-text-muted: 214 14% 65%; /* #94A3B8 - rgb(148, 163, 184) */
    
    /* Semantic Colors */
    --color-success: 158 64% 52%; /* #10B981 - Green */
    --color-warning: 38 92% 50%; /* #F59E0B - Amber */
    --color-error: 0 84% 60%; /* #EF4444 - Red */
    --color-info: 217 91% 60%; /* #3B82F6 - Blue */
    
    /* Typography Scale */
    --text-xs: 0.75rem;    /* 12px */
    --text-sm: 0.875rem;   /* 14px */
    --text-base: 1rem;     /* 16px */
    --text-lg: 1.125rem;   /* 18px */
    --text-xl: 1.25rem;    /* 20px */
    --text-2xl: 1.5rem;    /* 24px */
    --text-3xl: 1.875rem;  /* 30px */
    --text-4xl: 2.25rem;   /* 36px */
    
    /* Font Weights */
    --font-regular: 400;
    --font-medium: 500;
    --font-semibold: 600;
    --font-bold: 700;
    
    /* Spacing System - 4px base unit */
    --space-1: 0.25rem;  /* 4px */
    --space-2: 0.5rem;   /* 8px */
    --space-3: 0.75rem;  /* 12px */
    --space-4: 1rem;     /* 16px */
    --space-5: 1.25rem;  /* 20px */
    --space-6: 1.5rem;   /* 24px */
    --space-8: 2rem;     /* 32px */
    --space-10: 2.5rem;  /* 40px */
    --space-12: 3rem;    /* 48px */
    --space-16: 4rem;    /* 64px */
    
    /* Border Radius */
    --radius-sm: 0.5rem;   /* 8px */
    --radius-md: 0.75rem;  /* 12px */
    --radius-lg: 1rem;     /* 16px */
    --radius-xl: 1.5rem;   /* 24px */
    --radius-full: 9999px; /* Full circle */
    
    /* Shadows */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    
    /* Transitions */
    --transition-fast: 100ms ease-out;
    --transition-base: 200ms ease-out;
    --transition-slow: 300ms ease-out;
    
    /* Z-index Scale */
    --z-base: 0;
    --z-dropdown: 1000;
    --z-sticky: 1100;
    --z-fixed: 1200;
    --z-modal: 1300;
    --z-popover: 1400;
    --z-tooltip: 1500;
    
    /* ===== Legacy Compatibility (Shadcn/UI) ===== */
    --background: 210 40% 98%;
    --foreground: 215 25% 27%;

    --card: 0 0% 100%;
    --card-foreground: 215 25% 27%;

    --popover: 0 0% 100%;
    --popover-foreground: 215 25% 27%;

    --primary: 217 91% 60%;
    --primary-foreground: 210 40% 98%;

    --secondary: 217 91% 60%;
    --secondary-foreground: 215 25% 27%;

    --muted: 214 32% 97%;
    --muted-foreground: 215 16% 47%;

    --accent: 43 74% 53%;
    --accent-foreground: 215 25% 27%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 210 40% 98%;

    --border: 214 32% 91%;
    --input: 214 32% 91%;
    --ring: 217 91% 60%;

    --radius: 1rem;

    /* Sophia Prep specific colors */
    --sophia-blue: 217 91% 60%;
    --sophia-gold: 43 74% 53%;
    --sophia-light-blue: 217 91% 70%;
    --sophia-dark-blue: 221 83% 30%;

    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 240 5% 26%;
    --sidebar-primary: 217 91% 60%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 240 5% 96%;
    --sidebar-accent-foreground: 240 6% 10%;
    --sidebar-border: 220 13% 91%;
    --sidebar-ring: 217 91% 60%;
  }

  .dark {
    --background: 221 83% 8%;
    --foreground: 210 40% 98%;

    --card: 221 83% 12%;
    --card-foreground: 210 40% 98%;

    --popover: 221 83% 12%;
    --popover-foreground: 210 40% 98%;

    /* Primary: Blue in dark mode */
    --primary: 217 91% 60%;
    --primary-foreground: 222 47% 11%;

    --secondary: 221 83% 20%;
    --secondary-foreground: 210 40% 98%;

    --muted: 221 83% 20%;
    --muted-foreground: 215 20% 65%;

    /* Accent: Gold in dark mode */
    --accent: 43 74% 53%;
    --accent-foreground: 222 47% 11%;

    --destructive: 0 63% 31%;
    --destructive-foreground: 210 40% 98%;

    --border: 221 83% 20%;
    --input: 221 83% 20%;
    --ring: 217 91% 60%;

    /* Sophia Prep specific colors for dark mode */
    --sophia-blue: 217 91% 60%;
    --sophia-gold: 43 74% 53%;
    --sophia-light-blue: 217 91% 70%;
    --sophia-dark-blue: 221 83% 15%;

    --sidebar-background: 221 83% 8%;
    --sidebar-foreground: 240 5% 96%;
    --sidebar-primary: 217 91% 60%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 221 83% 15%;
    --sidebar-accent-foreground: 240 5% 96%;
    --sidebar-border: 221 83% 15%;
    --sidebar-ring: 217 91% 60%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html {
    font-family: 'Poppins', sans-serif;
  }

  body {
    @apply bg-background text-foreground;
    font-family: 'Poppins', sans-serif;
    font-feature-settings: "ss01", "ss02", "cv01", "cv02", "cv03";
  }

  /* Sophia Prep themed custom classes */
  .sophia-card {
    @apply bg-white/90 backdrop-blur-sm border border-blue-200/30 shadow-md rounded-xl overflow-hidden;
  }

  .sophia-glow {
    @apply relative;
  }

  .sophia-glow::after {
    content: '';
    @apply absolute -inset-0.5 rounded-xl blur opacity-30 -z-10 transition-all duration-300;
    background: linear-gradient(to right, #2563EB, #B78628);
  }

  .sophia-glow:hover::after {
    @apply opacity-60;
  }

  .footer-link:hover {
    color: #B78628;
  }

  /* Premium button hover effect */
  .premium-btn:hover {
    @apply text-red-600 border-red-500;
  }

  /* Mobile-first responsive improvements */
  @media (max-width: 640px) {
    .container {
      @apply px-3;
    }

    /* Ensure cards don't overflow on mobile */
    .card-container {
      @apply w-full min-w-0;
    }

    /* Better touch targets for mobile */
    .mobile-touch-target {
      @apply min-h-[44px] min-w-[44px];
    }

    /* Improved text readability on mobile */
    .mobile-text-shadow {
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    }
  }

  /* Enhanced backdrop blur for better readability */
  .enhanced-backdrop {
    backdrop-filter: blur(12px) saturate(180%);
    -webkit-backdrop-filter: blur(12px) saturate(180%);
  }

  /* Better contrast for overlaid text */
  .text-contrast {
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
  }

  /* Admin button hover effect */
  .admin-btn:hover {
    @apply text-red-600;
  }

  .sophia-grid-bg {
    background-image:
      linear-gradient(to right, rgba(30, 64, 175, 0.05) 1px, transparent 1px),
      linear-gradient(to bottom, rgba(30, 64, 175, 0.05) 1px, transparent 1px);
    background-size: 20px 20px;
  }

  .bottom-nav-item {
    @apply flex flex-col items-center justify-center text-xs font-medium text-muted-foreground;
  }

  .bottom-nav-item.active {
    @apply text-blue-600;
  }

  .quiz-option {
    @apply relative p-4 rounded-lg border bg-card w-full text-left transition-all duration-300
           hover:bg-blue-50 hover:border-blue-600/50 hover:shadow-md;
  }

  .quiz-option.selected {
    @apply border-blue-600 bg-blue-50/50;
  }

  .quiz-option.correct {
    @apply border-green-600 bg-green-50/10;
  }

  .quiz-option.incorrect {
    @apply border-red-600 bg-red-50/10;
  }

  .progress-bar {
    @apply h-2 rounded-full bg-blue-600/20 overflow-hidden;
  }

  .progress-bar-fill {
    @apply h-full bg-blue-600 transition-all duration-300;
  }

  .explanation-box {
    @apply mt-6 p-4 bg-blue-600/5 border border-blue-600/20 rounded-md animate-in fade-in duration-300;
  }

  .explanation-icon {
    @apply bg-blue-600/10 p-1 rounded-full flex-shrink-0;
  }

  .explanation-title {
    @apply text-sm font-medium mb-1 text-blue-600;
  }

  .explanation-text {
    @apply text-sm text-muted-foreground leading-relaxed;
  }

  /* Custom styles for learning material content */
  .prose {
    font-family: 'Poppins', sans-serif !important;
  }

  .prose p, .prose li, .prose h1, .prose h2, .prose h3, .prose h4, .prose h5, .prose h6,
  .prose ul, .prose ol, .prose blockquote, .prose pre, .prose code, .prose a, .prose strong, .prose em {
    font-family: 'Poppins', sans-serif !important;
  }

  /* Ensure all content in learning material pages uses Poppins */
  .learning-material-content * {
    font-family: 'Poppins', sans-serif !important;
  }

  /* Profile avatar container with proper spacing for subscription badge */
  .profile-avatar-container {
    @apply relative inline-block;
    /* Add padding to accommodate the subscription badge */
    padding-top: 0.5rem;
    padding-right: 1.5rem;
    padding-left: 0.25rem;
  }

  /* Subscription badge positioning */
  .subscription-badge-overlay {
    @apply absolute z-10;
    top: 0.25rem;
    right: 0.5rem;
    /* Ensure the badge doesn't overflow */
    max-width: calc(100% - 1rem);
  }

  /* Prevent badge text overflow */
  .subscription-badge-compact {
    @apply inline-flex items-center justify-center;
    min-width: fit-content;
    white-space: nowrap;
  }

  /* Responsive adjustments for small screens */
  @media (max-width: 640px) {
    .profile-avatar-container {
      padding-right: 1.25rem;
    }

    .subscription-badge-overlay {
      right: 0.25rem;
      top: 0.125rem;
    }
  }
}
